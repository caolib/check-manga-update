# å®šæ—¶è·å–æ‹·è´æ¼«ç”»æ›´æ–°

[![check](https://github.com/caolib/check-manga-update/actions/workflows/check_update.yml/badge.svg)](https://github.com/caolib/check-manga-update/actions/workflows/check_update.yml)
![GitHub last commit](https://img.shields.io/github/last-commit/caolib/check-manga-update?logo=github)
![GitHub Release](https://img.shields.io/github/v/release/caolib/check-manga-update?link=https%3A%2F%2Fgithub.com%2Fcaolib%2Fcheck-manga-update%2Freleases)
![GitHub License](https://img.shields.io/github/license/caolib/check-manga-update)

## 1.ç®€ä»‹
## 1.ç®€ä»‹

ä½¿ç”¨`Github Actions`å®šæœŸæ‰§è¡Œpythonè„šæœ¬æ£€æŸ¥æ‹·è´æ¼«ç”»ä¸ªäººä¹¦æ¶çš„æ¼«ç”»æ˜¯å¦æ›´æ–°ï¼Œå¹¶ä½¿ç”¨é‚®ä»¶é€šçŸ¥æ›´æ–°

é‚®ä»¶æé†’ç¤ºä¾‹ï¼š

![image-20250307194544112](https://s2.loli.net/2025/03/07/dseWfJnl5L4KoaS.png)

## 2.æ€ä¹ˆä½¿ç”¨
## 2.æ€ä¹ˆä½¿ç”¨

### 2.1 æœ¬åœ°ä½¿ç”¨

> [!note]
>
> å¦‚æœä½ å¹¶**ä¸éœ€è¦å®šæ—¶æ£€æŸ¥**ï¼Œè¿™ç§æ–¹å¼æ›´é€‚åˆä½ 

1. cloneä»“åº“æˆ–ä¸‹è½½[å‹ç¼©åŒ…](https://github.com/caolib/check-manga-update/archive/refs/heads/main.zip)åˆ°æœ¬åœ°

2. åœ¨`data`æ–‡ä»¶å¤¹ä¸‹æ·»åŠ ä¸€ä¸ªæ–‡ä»¶`var.json`ï¼Œå¡«å†™ä½ çš„ç”¨æˆ·åå’Œå¯†ç 

   ```json
   {
       "token": "",
       "username": "æ‹·è´çš„ç”¨æˆ·å",
       "password": "æ‹·è´çš„å¯†ç ",
       "from_email": "",
       "to_email": "",
       "email_token": ""
   }
   ```
   
3. åŒå‡»`main.py`å³å¯å¯åŠ¨

### 2.2 åœ¨githubä¸Šä½¿ç”¨

> è¿™ç§æ–¹æ³•ç›¸å¯¹æ¥è¯´è¾ƒä¸ºéº»çƒ¦ï¼Œä½†æ˜¯å¯ä»¥å®šæ—¶æ£€æŸ¥å¹¶å‘é‚®ä»¶é€šçŸ¥ä½ ï¼Œå…ˆå†³æ¡ä»¶ï¼š
>
> 1. ä¸€ä¸ªå¼€å¯äº†SMTPæœåŠ¡çš„é‚®ç®±ï¼Œç”¨äºå‘é€é‚®ä»¶é€šçŸ¥ä½ æ¼«ç”»æ›´æ–°äº†
> 2. ä¸€ä¸ªæ‹·è´æ¼«ç”»çš„è´¦å·ï¼Œç”¨äºæ£€æŸ¥ä½ çš„ä¸ªäººä¹¦æ¶æ˜¯å¦æœ‰æ›´æ–°
> 3. ä¸€ä¸ªgithubä»“åº“ç”¨äºå®šæœŸè¿è¡Œæ£€æŸ¥è„šæœ¬

#### 1.å¼€å¯é‚®ä»¶SMTPæœåŠ¡

æ­¤å¤„ä½¿ç”¨QQé‚®ç®±ï¼Œå¯ä»¥å‚é˜…è¿™ç¯‡æ–‡ç« [é‚®ç®±å¼€å¯SMTPæœåŠ¡](https://clb.pages.dev/2024/12/27/å¼€å¯SMTPæœåŠ¡/)è·å–é‚®ç®±æˆæƒç `EMAIL_TOKEN`

å¦‚æœè¦ä½¿ç”¨å…¶ä»–é‚®ç®±æœåŠ¡ï¼Œéœ€è¦ä¿®æ”¹`main.py`æ–‡ä»¶ä¸­çš„å¯¹åº”é‚®ç®±æœåŠ¡çš„åœ°å€å’Œç«¯å£ï¼Œå¯¹åº”æˆæƒç å¦‚ä½•è·å–å¯ä»¥ä¸Šç½‘æŸ¥è¯¢ï¼Œæ¯”å¦‚ä¿®æ”¹ä¸ºGmailï¼š

```py
# server = EmailServer("smtp.qq.com", 465, email_token)    # QQ
server = EmailServer("smtp.gmail.com", 465, email_token)   # Gmail
```

#### 2.cloneæˆ–fork

å› ä¸ºä»“åº“ä¸­çš„`data/comics.json`æ–‡ä»¶ä¿å­˜äº†ä½ çš„ä¹¦æ¶ä¸­æœ€è¿‘æ›´æ–°çš„æ¼«ç”»(ä¸Šé™20ä¸ª)ï¼Œæ‰€ä»¥ï¼š

- å¦‚æœä½ ä¸æƒ³è®©åˆ«äººçœ‹åˆ°ä½ çš„ä¸ªäººä¹¦æ¶ï¼šä½ å¯ä»¥**Clone**æœ¬ä»“åº“åˆ°æœ¬åœ°ï¼Œç„¶åå†æ¨é€åˆ°ä½ githubçš„ç§äººä»“åº“ä¸­(å…ˆåœ¨githubåˆ›å»ºä¸€ä¸ªç§æœ‰ä»“åº“ï¼Œç„¶åå°†cloneä¸‹æ¥çš„ä»“åº“ç»‘å®šä½ åˆšåˆ›å»ºçš„ä»“åº“ï¼Œæœ€åå°†ä»£ç æ¨é€ä¸Šå»)

- å¦‚æœä½ ä¸ä»‹æ„åˆ«äººçœ‹åˆ°çš„è¯ï¼šä½ å¯ä»¥ç›´æ¥**Fork**æœ¬ä»“åº“(~~æˆ‘æ ¹æœ¬ä¸ä»‹æ„çš„ğŸ˜‹~~)

#### 3.æ·»åŠ Secrets

- è¿›å…¥ä½ çš„ä»“åº“ï¼Œç‚¹å‡»**Settings** 

![image-20241228123435863](https://s2.loli.net/2024/12/28/y2YDdAGHhiW3Bkg.png)

- åœ¨å·¦ä¾§æ æ‰¾åˆ°`Secrets`ä¸‹çš„`Actions`ï¼Œæ·»åŠ å›¾ä¸­6ä¸ªå˜é‡ï¼Œä¸‹é¢æœ‰`TOKEN`çš„è·å–æ­¥éª¤,å…¶ä»–å±æ€§æŒ‰è‡ªå·±çš„å¡«å°±è¡Œ

![image-20241228123648544](https://s2.loli.net/2024/12/28/CkFaXtLTQbRU5he.png)

| Key         | Value        |
|-------------|--------------|
| TOKEN       | æ‹·è´ token     |
| USERNAME    | æ‹·è´ ç”¨æˆ·å       |
| PASSWORD    | æ‹·è´ å¯†ç         |
| FROM_EMAIL  | å‘ä»¶äººé‚®ç®±        |
| TO_EMAIL    | æ”¶ä»¶äººé‚®ç®±ï¼Œå¯ä»¥å‘ç»™è‡ªå·± |
| EMAIL_TOKEN | é‚®ç®±æˆæƒç         |

å¿«æ·å¤åˆ¶:)

```txt
TOKEN
```

```txt
USERNAME
```

```txt
PASSWORD
```

```txt
FROM_EMAIL
```

```txt
TO_EMAIL
```

```txt
EMAIL_TOKEN
```

> [!caution]
>
> æ‹·è´æ¼«ç”»çš„Tokenä¸æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºå¯ä»¥ç”¨è´¦å·å‘é€è¯·æ±‚è·å–Tokenï¼Œé‚£ä¸ºä»€ä¹ˆè¿™é‡Œè¿˜å»ºè®®ç”¨ç½‘ç«™çš„Tokenå‘¢ï¼Ÿå› ä¸ºActionsä¸­ä½¿ç”¨è´¦å·å¯†ç è·å–Tokenä¼šå¯¼è‡´ä½ ç½‘ç«™ä¸Šçš„Tokenè¿‡æœŸï¼Œä½ å°±éœ€è¦åœ¨æ‹·è´ç½‘ç«™ä¸Šé‡æ–°ç™»å½•æ‰èƒ½çœ‹æ¼«ç”»
>
> - å¦‚æœä½ è®¾ç½®äº†æ­£ç¡®çš„Tokenï¼Œä¼šä¼˜å…ˆä½¿ç”¨ä½ è®¾ç½®çš„Tokenï¼Œå¦åˆ™æ‰ä¼šä½¿ç”¨è´¦å·å¯†ç 
>
> - å¦‚æœä½ è§‰å¾—åœ¨æ‹·è´ç½‘ç«™é‡æ–°ç™»å½•å¹¶ä¸éº»çƒ¦ï¼Œä½ å¯ä»¥å¿½ç•¥ä¸‹é¢è·å–Tokenæ­¥éª¤ï¼Œ`TOKEN`å˜é‡ä¹Ÿæ— éœ€è®¾ç½®å€¼

è·å–æ‹·è´æ¼«ç”»çš„Tokenï¼š

- å‰å¾€[æ‹·è²æ¼«ç•«](https://www.mangacopy.com/)ï¼Œç™»å½•ä½ çš„è´¦å·

- æŒ‰`F12`æˆ–å³é”®é€‰æ‹©**æ£€æŸ¥**æ‰“å¼€å¼€å‘è€…å·¥å…·

- æ‰“å¼€åº”ç”¨ç¨‹åºä¸€æ ï¼Œåœ¨å·¦ä¾§æ‰¾åˆ°Cookieï¼Œå¤åˆ¶tokençš„å€¼

- **å…¶å®tokenä¹Ÿä¸æ˜¯å¿…é¡»çš„ï¼Œåªè¦æœ‰ç”¨æˆ·åå’Œå¯†ç å¯ä»¥è‡ªåŠ¨è·å–ï¼Œä½†æ˜¯è‡ªåŠ¨è·å–çš„tokenä¼šå¯¼è‡´ä½ çš„ç½‘ç«™ä¸Šçš„tokenå¤±æ•ˆï¼Œæ¯æ¬¡è‡ªåŠ¨è·å–ä¸€æ¬¡tokenï¼Œç½‘ç«™éƒ½éœ€è¦é‡æ–°ç™»å½•**

  ![image-20241228124951850](https://s2.loli.net/2024/12/28/un3kYgVO5BENLvF.png)

#### 4.æµ‹è¯•

ä½ å¯ä»¥æ‰‹åŠ¨è§¦å‘å·¥ä½œæµæµ‹è¯•æ˜¯å¦èƒ½æ­£å¸¸å·¥ä½œ

![image-20250307200542211](https://s2.loli.net/2025/03/07/l1ZO7XqyFMRvt9J.png)

Actionså¯åŠ¨åç‚¹å‡»checkæŸ¥çœ‹å·¥ä½œæµæ‰§è¡Œæƒ…å†µ

![image-20250307200902406](https://s2.loli.net/2025/03/07/UHZo6lhFVT3DMX5.png)


## 3.å…¶ä»–é…ç½®

### 3.1 ä¿®æ”¹è§¦å‘æ¡ä»¶

> [!NOTE] 
>
> è§¦å‘æ¡ä»¶é»˜è®¤æ˜¯æ¯éš”ä¸€æ®µæ—¶é—´è§¦å‘ä¸€æ¬¡ï¼Œä½ å¯ä»¥ä¿®æ”¹ä»“åº“ä¸‹`.github/workflows/check_update.yml`è°ƒæ•´è§¦å‘é¢‘ç‡æˆ–æ—¶é—´æ®µï¼Œä¾‹å¦‚ä¿®æ”¹ä¸ºï¼š
>
> `- cron: "0 * * * *"` : æ¯å°æ—¶è§¦å‘ä¸€æ¬¡
>
> æœ€é«˜è§¦å‘é¢‘ç‡æ˜¯æ¯äº”åˆ†é’Ÿä¸€æ¬¡ï¼Œæ³¨æ„Actionsæ¯ä¸ªæœˆçš„[ä½¿ç”¨é¢åº¦](https://docs.github.com/zh/billing/managing-billing-for-your-products/managing-billing-for-github-actions/about-billing-for-github-actions)æ˜¯æœ‰é™çš„ï¼Œå…è´¹ç‰ˆ2000åˆ†é’Ÿ/æœˆï¼Œä¸€æ¬¡ä»»åŠ¡å¤§æ¦‚20så·¦å³ï¼Œåªè¦ä¸æ˜¯å¾ˆé¢‘ç¹ï¼Œè¿™ä¸ªå…è´¹é¢åº¦è¿˜æ˜¯ç»°ç»°æœ‰ä½™çš„

```yml
on:
  # å®šæ—¶è§¦å‘
  schedule:
    # æ¯éš”30åˆ†é’Ÿè§¦å‘ä¸€æ¬¡
    - cron: "*/30 * * * *"
    # æ¯å°æ—¶æ•´ç‚¹è§¦å‘
    # - cron: "0 * * * *"
```

## 4.è®¡åˆ’
## 4.è®¡åˆ’

- [x] å¯ä»¥ä½¿ç”¨å…¶ä»–é‚®ç®±æœåŠ¡
- [x] é¡¹ç›®æ–‡ä»¶ç»“æ„ä¼˜åŒ–ï¼ŒæŠ½å–å‡½æ•°åˆ°å¤šä¸ªpyæ–‡ä»¶

**å¦‚æœå¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œä¸å¦¨ç»™ä¸ªstarâ­**

![](https://counter.seku.su/cmoe?name=check-manga-update&theme=r34)
